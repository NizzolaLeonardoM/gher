<!DOCTYPE html>
<html>
<head>
	<title>Slot</title>
	<style type="text/css">
		body{
			background-color: rgb(19,98,7);
			margin: 0;
		}
		.slot{
			border-style: solid;
			border-color: rgb(0,0,0);
			margin-left: 2vw;
			margin-top: 0.5vh;
			width: 92vw;
			height: 70vh;
			border-radius: 2vw;
			border-width: 2vw;
			background-color: rgb(135, 161, 142);
		}
		.uid{
			margin-left: 7vw;
			margin-top: 0.5vh;
			font-size: 6vw;
		}
		.topdisplay{
		  margin-top: 1vh;
		  text-align: center;
		}
		.display1{
			border-style: solid;
			border-color: rgb(0,0,0);
			margin-left: 2.5vw;
			margin-top: 0;
			width: 85vw;
			height: 10vh;
			border-radius: 2vw;
			border-width: 1vw;
			background-color: rgb(255,255,255);
			text-align: center;
		}
		.display2{
			border-style: solid;
			border-color: rgb(0,0,0);
			margin-left: 2.5vw;
			margin-top: 0;
			width: 85vw;
			height: 10vh;
			border-radius: 2vw;
			border-width: 1vw;
			background-color: rgb(255,255,255);
			text-align: center;
		}
		.display3{
			border-style: solid;
			border-color: rgb(0,0,0);
			margin-left: 2.5vw;
			margin-top: 0;
			width: 85vw;
			height: 10vh;
			border-radius: 2vw;
			border-width: 1vw;
			background-color: rgb(255,255,255);
			text-align: center;
		}
		.image{
			width: 19%;
			margin-top: 2%;
			position: relative;
		}
		.spin{
			border-style: solid;
			border-color: rgb(0,0,0);
			margin-left: 9vw;
			margin-top: 3vh;
			width: 32vw;
			height: 10vh;
			border-radius: 2vw;
			border-width: 1vw;
			background-color: rgb(255,255,0);
			font-size: 9vw;
		}
		.Saldo{
			margin-left: 7vw;
			margin-top: 0.5vh;
			font-size: 9vw;
		}
		.report{
			border-style: solid;
			border-color: rgb(0,0,0);
			margin-left: 9vw;
			margin-top: 1vh;
			width: 72vw;
			height: 5vh;
			border-radius: 2vw;
			border-width: 1vw;
			background-color: rgb(30,30,30);
			font-size: 4vw;
			color: gold;
			vertical-align: middle;
		}
		.bonusgher{
			border-style: solid;
			border-color: rgb(0,0,0);
			margin-left: 9vw;
			margin-top: 0.5vh;
			width: 72vw;
			height: 5vh;
			border-radius: 2vw;
			border-width: 1vw;
			background-color: rgb(30,30,30);
			font-size: 6vw;
			color: red;
			vertical-align: middle;
		}
		.puntata{
			border-style: solid;
			border-color: rgb(0,0,0);
			margin-left: 6vw;
			margin-top: 2vh;
			width: 32vw;
			height: 8vh;
			border-radius: 2vw;
			border-width: 1vw;
			background-color: rgb(255,150,0);
			font-size: 8vw;
		}
	</style>
</head>
<body>
  <div class="uid">UID: <span id="uid">0</span></div>
	<div class="slot">
		<div class="topdisplay" id="display">
		  <div class="display1" id="display1">
		    <span id="1"><img src="images/slot/1.jpg" class="image"></span>
			  <span id="2"><img src="images/slot/1.jpg" class="image"></span>
		  	<span id="3"><img src="images/slot/1.jpg" class="image"></span>
		  	<span id="4"><img src="images/slot/1.jpg" class="image"></span>
		  	<span id="5"><img src="images/slot/1.jpg" class="image"></span>
		  </div>
			<div class="display2" id="display2">
		    <span id="6"><img src="images/slot/1.jpg" class="image"></span>
			  <span id="7"><img src="images/slot/1.jpg" class="image"></span>
		  	<span id="8"><img src="images/slot/1.jpg" class="image"></span>
		  	<span id="9"><img src="images/slot/1.jpg" class="image"></span>
		  	<span id="10"><img src="images/slot/1.jpg" class="image"></span>
		  </div>
		  <div class="display3" id="display3">
		    <span id="11"><img src="images/slot/1.jpg" class="image"></span>
			  <span id="12"><img src="images/slot/1.jpg" class="image"></span>
		  	<span id="13"><img src="images/slot/1.jpg" class="image"></span>
		  	<span id="14"><img src="images/slot/1.jpg" class="image"></span>
		  	<span id="15"><img src="images/slot/1.jpg" class="image"></span>
		  </div>
		</div>
		<div class="bonusgher">
			<span id="bonusghertest"></span> <span id="bonusghermolt"></span>
		</div>
		<div class="report">
			<span id="puntatarep"></span> <span id="vincitarep"></span>
		</div>
		<button class="spin" onclick="spin();">
			<b>
				SPIN!
			</b>
		</button> 
		<input class="puntata" type="number" id="puntata" name="puntata" value="0.5" step="5">
	</div>
	<div class="Saldo">Saldo: <span id="saldo">0</span>$</div>
	<script type="text/javascript">
	  var uid=localStorage.getItem("UID");
		var Saldo=localStorage.getItem("saldo");
		slot=new Array();
		var sp=0;
		var spg=0;
		var dl=50;
		var puntata=0;
		var vincita=0;
		var bonusgher=1;
		var ricavo=0;
		
		document.getElementById("uid").innerHTML=uid;
		
		for(var i=0;i<15;i++){
		  slot[i]=1;
		  document.getElementById(i+1).innerHTML="<img src=\"images/slot/"+slot[i]+".jpg\" class=\"image\">";
		}
  
		function spin(){
			if((sp==0 || sp==51) && (spg==0 || spg==41)){
				puntata=document.getElementById("puntata").value;
				puntata=Math.round(puntata*100)/100;
				if(puntata<=Saldo && puntata>0){
					Saldo=Saldo-puntata;
					Saldo=Math.round(Saldo * 100) / 100;
					localStorage.setItem("saldo", Saldo);
					document.getElementById("saldo").innerHTML=Saldo;
					document.getElementById("puntatarep").innerHTML="Puntata: "+puntata+"$ ";
					document.getElementById("vincitarep").innerHTML="";
					document.getElementById("display1").style="background-color: white";
					document.getElementById("display2").style="background-color: white";
					document.getElementById("display3").style="background-color: white";
					document.getElementById("bonusghertest").innerHTML="";
					document.getElementById("bonusghermolt").innerHTML="";
					sp=0;
					myInterval = setInterval(spinny, dl);
				}else if(puntata>Saldo){
					document.getElementById("puntatarep").innerHTML="Puntata superiore al saldo.";
					document.getElementById("vincitarep").innerHTML="";
				}else{
					document.getElementById("puntatarep").innerHTML="Puntata non valida.";
					document.getElementById("vincitarep").innerHTML="";
				}
				
			}	
		}

		function spinny(){
			console.log("spinny");
			if(sp<10){
				spinnumber(1);
			}
			if(sp<20){
				spinnumber(2);
			}
			if(sp<30){
				spinnumber(3);
			}
			if(sp<40){
				spinnumber(4);
			}
			if(sp<50){
				spinnumber(5);
			}
			if (sp==50){
				clearInterval(myInterval);
				vittoria();
			}
			sp++;
		}

		function spinnumber(pos){
			slot[pos]=Math.floor((Math.random() * 10) + 1);
			document.getElementById(pos).innerHTML="<img src=\"images/slot/"+slot[pos]+".jpg\" class=\"image\">";
			pos+=5;
			slot[pos]=Math.floor((Math.random() * 10) + 1);
			document.getElementById(pos).innerHTML="<img src=\"images/slot/"+slot[pos]+".jpg\" class=\"image\">";
			pos+=5;
			slot[pos]=Math.floor((Math.random() * 10) + 1);
			document.getElementById(pos).innerHTML="<img src=\"images/slot/"+slot[pos]+".jpg\" class=\"image\">";
		}

		function vittoria(){
		  ricavo=0;
		  var moltiplicatore=0;
		  bonusgher=1;
		  
		  premiriga1=new Array();
		  premiriga2=new Array();
		  premiriga3=new Array();
		  
		  for(var v=1;v<11;v++){
		    premiriga1[v]=0;
		    premiriga2[v]=0;
		    premiriga3[v]=0;
		  }
		  
		  var controllo;
		  
		  controllo=premiriga1;
		  for(var v=1;v<6;v++){
		    controllo[slot[v]]++;
		  }
		  for(var v=1;v<6;v++){
		    if(slot[v]==2){
		         if(controllo[1]>=1){
		            controllo[1]++;
		         }else if(controllo[10]>=1){
		           controllo[10]++;
		         }else if(controllo[4]>=1){
		           controllo[4]++;
		         }else if(controllo[5]>=1){
		           controllo[5]++;
		         }else if(controllo[6]>=2){
		           controllo[6]++;
		         }else if(controllo[7]>=2){
		           controllo[7]++;
		         }else if(controllo[8]>=2){
		           controllo[8]++;
		         }else if(controllo[9]>=2){
		           controllo[9]++;
		         }else if(controllo[3]>=2){
		           controllo[3]++;
		         }
		      }
		    }
		  
		  controllo=premiriga2;
		  for(var v=6;v<11;v++){
		    controllo[slot[v]]++;
		  }
		  for(var v=6;v<11;v++){
		    if(slot[v]==2){
		         if(controllo[1]>=1){
		            controllo[1]++;
		         }else if(controllo[10]>=1){
		           controllo[10]++;
		         }else if(controllo[4]>=1){
		           controllo[4]++;
		         }else if(controllo[5]>=1){
		           controllo[5]++;
		         }else if(controllo[6]>=2){
		           controllo[6]++;
		         }else if(controllo[7]>=2){
		           controllo[7]++;
		         }else if(controllo[8]>=2){
		           controllo[8]++;
		         }else if(controllo[9]>=2){
		           controllo[9]++;
		         }else if(controllo[3]>=2){
		           controllo[3]++;
		         }
		      }
		    }
		  
		  controllo=premiriga3;
		  for(var v=11;v<16;v++){
		    controllo[slot[v]]++;
		  }
		  for(var v=11;v<16;v++){
		    if(slot[v]==2){
		         if(controllo[1]>=1){
		            controllo[1]++;
		         }else if(controllo[10]>=1){
		           controllo[10]++;
		         }else if(controllo[4]>=1){
		           controllo[4]++;
		         }else if(controllo[5]>=1){
		           controllo[5]++;
		         }else if(controllo[6]>=2){
		           controllo[6]++;
		         }else if(controllo[7]>=2){
		           controllo[7]++;
		         }else if(controllo[8]>=2){
		           controllo[8]++;
		         }else if(controllo[9]>=2){
		           controllo[9]++;
		         }else if(controllo[3]>=2){
		           controllo[3]++;
		         }
		      }
		    }

		  /*for(var v=1;v<11;v++){
		  	console.log(v+":"+premiriga2[v]);
		  }*/

		  controllo=premiriga1;
		  if(controllo[3]>=3){
		    document.getElementById("display1").style="background-color: lightblue";
		  }
		  if(controllo[3]==5){
		  	ricavo=ricavo+puntata*10;
		  }else if(controllo[3]==4){
		  	ricavo=ricavo+puntata*2.5;
		  }else if(controllo[3]==3){
		  	ricavo=ricavo+puntata*0.5;
		  }
		  if(controllo[8]>=3){
		    document.getElementById("display1").style="background-color: lightblue";
		  }
		  if(controllo[8]==5){
		  	ricavo=ricavo+puntata*10;
		  }else if(controllo[8]==4){
		  	ricavo=ricavo+puntata*2.5;
		  }else if(controllo[8]==3){
		  	ricavo=ricavo+puntata*0.5;
		  }
		  if(controllo[9]>=3){
		    document.getElementById("display1").style="background-color: lightblue";
		  }
		  if(controllo[9]==5){
		  	ricavo=ricavo+puntata*10;
		  }else if(controllo[9]==4){
		  	ricavo=ricavo+puntata*2.5;
		  }else if(controllo[9]==3){
		  	ricavo=ricavo+puntata*0.5;
		  }
		  if(controllo[6]>=3){
		    document.getElementById("display1").style="background-color: gray";
		  }
		  if(controllo[6]==5){
		  	ricavo=ricavo+puntata*15;
		  }else if(controllo[6]==4){
		  	ricavo=ricavo+puntata*4;
		  }else if(controllo[6]==3){
		  	ricavo=ricavo+puntata*0.5;
		  }
		  if(controllo[7]>=3){
		    document.getElementById("display1").style="background-color: gray";
		  }
		  if(controllo[7]==5){
		  	ricavo=ricavo+puntata*15;
		  }else if(controllo[7]==4){
		  	ricavo=ricavo+puntata*4;
		  }else if(controllo[7]==3){
		  	ricavo=ricavo+puntata*0.5;
		  }
		  if(controllo[4]>=2){
		    document.getElementById("display1").style="background-color: gold";
		  }
		  if(controllo[4]==5){
		  	ricavo=ricavo+puntata*75;
		  }else if(controllo[4]==4){
		  	ricavo=ricavo+puntata*10;
		  }else if(controllo[4]==3){
		  	ricavo=ricavo+puntata*3;
		  }else if(controllo[4]==2){
		  	ricavo=ricavo+puntata*0.5;
		  }
		  if(controllo[5]>=2){
		    document.getElementById("display1").style="background-color: gold";
		  }
		  if(controllo[5]==5){
		  	ricavo=ricavo+puntata*75;
		  }else if(controllo[5]==4){
		  	ricavo=ricavo+puntata*10;
		  }else if(controllo[5]==3){
		  	ricavo=ricavo+puntata*3;
		  }else if(controllo[5]==2){
		  	ricavo=ricavo+puntata*0.5;
		  }
		  if(controllo[1]>=2){
		    document.getElementById("display1").style="background-color: red";
		  }
		  if(controllo[1]==5){
		  	ricavo=ricavo+puntata*500;
		  }else if(controllo[1]==4){
		  	ricavo=ricavo+puntata*100;
		  }else if(controllo[1]==3){
		  	ricavo=ricavo+puntata*10;
		  }else if(controllo[1]==2){
		  	ricavo=ricavo+puntata*1;
		  }
		  if(controllo[10]>=2){
		    document.getElementById("display1").style="background-color: red";
		  }
		  if(controllo[10]==5){
		  	ricavo=ricavo+puntata*200;
		  }else if(controllo[10]==4){
		  	ricavo=ricavo+puntata*40;
		  }else if(controllo[10]==3){
		  	ricavo=ricavo+puntata*4;
		  }else if(controllo[10]==2){
		  	ricavo=ricavo+puntata*0.5;
		  }
		  if(controllo[2]>=3){
		    document.getElementById("display1").style="background-color: blue";
		  }
		  if(controllo[2]==5){
		  	ricavo=ricavo+puntata*180;
		  }else if(controllo[2]==4){
		  	ricavo=ricavo+puntata*18;
		  }else if(controllo[2]==3){
		  	ricavo=ricavo+puntata*1.8;
		  }

		  controllo=premiriga2;
		  if(controllo[3]>=3){
		    document.getElementById("display2").style="background-color: lightblue";
		  }
		  if(controllo[3]==5){
		  	ricavo=ricavo+puntata*10;
		  }else if(controllo[3]==4){
		  	ricavo=ricavo+puntata*2.5;
		  }else if(controllo[3]==3){
		  	ricavo=ricavo+puntata*0.5;
		  }
		  if(controllo[8]>=3){
		    document.getElementById("display2").style="background-color: lightblue";
		  }
		  if(controllo[8]==5){
		  	ricavo=ricavo+puntata*10;
		  }else if(controllo[8]==4){
		  	ricavo=ricavo+puntata*2.5;
		  }else if(controllo[8]==3){
		  	ricavo=ricavo+puntata*0.5;
		  }
		  if(controllo[9]>=3){
		    document.getElementById("display2").style="background-color: lightblue";
		  }
		  if(controllo[9]==5){
		  	ricavo=ricavo+puntata*10;
		  }else if(controllo[9]==4){
		  	ricavo=ricavo+puntata*2.5;
		  }else if(controllo[9]==3){
		  	ricavo=ricavo+puntata*0.5;
		  }
		  if(controllo[6]>=3){
		    document.getElementById("display2").style="background-color: gray";
		  }
		  if(controllo[6]==5){
		  	ricavo=ricavo+puntata*15;
		  }else if(controllo[6]==4){
		  	ricavo=ricavo+puntata*4;
		  }else if(controllo[6]==3){
		  	ricavo=ricavo+puntata*0.5;
		  }
		  if(controllo[7]>=3){
		    document.getElementById("display2").style="background-color: gray";
		  }
		  if(controllo[7]==5){
		  	ricavo=ricavo+puntata*15;
		  }else if(controllo[7]==4){
		  	ricavo=ricavo+puntata*4;
		  }else if(controllo[7]==3){
		  	ricavo=ricavo+puntata*0.5;
		  }
		  if(controllo[4]>=2){
		    document.getElementById("display2").style="background-color: gold";
		  }
		  if(controllo[4]==5){
		  	ricavo=ricavo+puntata*75;
		  }else if(controllo[4]==4){
		  	ricavo=ricavo+puntata*10;
		  }else if(controllo[4]==3){
		  	ricavo=ricavo+puntata*3;
		  }else if(controllo[4]==2){
		  	ricavo=ricavo+puntata*0.5;
		  }
		  if(controllo[5]>=2){
		    document.getElementById("display2").style="background-color: gold";
		  }
		  if(controllo[5]==5){
		  	ricavo=ricavo+puntata*75;
		  }else if(controllo[5]==4){
		  	ricavo=ricavo+puntata*10;
		  }else if(controllo[5]==3){
		  	ricavo=ricavo+puntata*3;
		  }else if(controllo[5]==2){
		  	ricavo=ricavo+puntata*0.5;
		  }
		  if(controllo[1]>=2){
		    document.getElementById("display2").style="background-color: red";
		  }
		  if(controllo[1]==5){
		  	ricavo=ricavo+puntata*500;
		  }else if(controllo[1]==4){
		  	ricavo=ricavo+puntata*100;
		  }else if(controllo[1]==3){
		  	ricavo=ricavo+puntata*10;
		  }else if(controllo[1]==2){
		  	ricavo=ricavo+puntata*1;
		  }
		  if(controllo[10]>=2){
		    document.getElementById("display2").style="background-color: red";
		  }
		  if(controllo[10]==5){
		  	ricavo=ricavo+puntata*200;
		  }else if(controllo[10]==4){
		  	ricavo=ricavo+puntata*40;
		  }else if(controllo[10]==3){
		  	ricavo=ricavo+puntata*4;
		  }else if(controllo[10]==2){
		  	ricavo=ricavo+puntata*0.5;
		  }
		  if(controllo[2]>=3){
		    document.getElementById("display2").style="background-color: blue";
		  }
		  if(controllo[2]==5){
		  	ricavo=ricavo+puntata*180;
		  }else if(controllo[2]==4){
		  	ricavo=ricavo+puntata*18;
		  }else if(controllo[2]==3){
		  	ricavo=ricavo+puntata*1.8;
		  }
		  
		  controllo=premiriga3;
		  if(controllo[3]>=3){
		    document.getElementById("display3").style="background-color: lightblue";
		  }
		  if(controllo[3]==5){
		  	ricavo=ricavo+puntata*10;
		  }else if(controllo[3]==4){
		  	ricavo=ricavo+puntata*2.5;
		  }else if(controllo[3]==3){
		  	ricavo=ricavo+puntata*0.5;
		  }
		  if(controllo[8]>=3){
		    document.getElementById("display3").style="background-color: lightblue";
		  }
		  if(controllo[8]==5){
		  	ricavo=ricavo+puntata*10;
		  }else if(controllo[8]==4){
		  	ricavo=ricavo+puntata*2.5;
		  }else if(controllo[8]==3){
		  	ricavo=ricavo+puntata*0.5;
		  }
		  if(controllo[9]>=3){
		    document.getElementById("display3").style="background-color: lightblue";
		  }
		  if(controllo[9]==5){
		  	ricavo=ricavo+puntata*10;
		  }else if(controllo[9]==4){
		  	ricavo=ricavo+puntata*2.5;
		  }else if(controllo[9]==3){
		  	ricavo=ricavo+puntata*0.5;
		  }
		  if(controllo[6]>=3){
		    document.getElementById("display3").style="background-color: gray";
		  }
		  if(controllo[6]==5){
		  	ricavo=ricavo+puntata*15;
		  }else if(controllo[6]==4){
		  	ricavo=ricavo+puntata*4;
		  }else if(controllo[6]==3){
		  	ricavo=ricavo+puntata*0.5;
		  }
		  if(controllo[7]>=3){
		    document.getElementById("display3").style="background-color: gray";
		  }
		  if(controllo[7]==5){
		  	ricavo=ricavo+puntata*15;
		  }else if(controllo[7]==4){
		  	ricavo=ricavo+puntata*4;
		  }else if(controllo[7]==3){
		  	ricavo=ricavo+puntata*0.5;
		  }
		  if(controllo[4]>=2){
		    document.getElementById("display3").style="background-color: gold";
		  }
		  if(controllo[4]==5){
		  	ricavo=ricavo+puntata*75;
		  }else if(controllo[4]==4){
		  	ricavo=ricavo+puntata*10;
		  }else if(controllo[4]==3){
		  	ricavo=ricavo+puntata*3;
		  }else if(controllo[4]==2){
		  	ricavo=ricavo+puntata*0.5;
		  }
		  if(controllo[5]>=2){
		    document.getElementById("display3").style="background-color: gold";
		  }
		  if(controllo[5]==5){
		  	ricavo=ricavo+puntata*75;
		  }else if(controllo[5]==4){
		  	ricavo=ricavo+puntata*10;
		  }else if(controllo[5]==3){
		  	ricavo=ricavo+puntata*3;
		  }else if(controllo[5]==2){
		  	ricavo=ricavo+puntata*0.5;
		  }
		  if(controllo[1]>=2){
		    document.getElementById("display3").style="background-color: red";
		  }
		  if(controllo[1]==5){
		  	ricavo=ricavo+puntata*500;
		  }else if(controllo[1]==4){
		  	ricavo=ricavo+puntata*100;
		  }else if(controllo[1]==3){
		  	ricavo=ricavo+puntata*10;
		  }else if(controllo[1]==2){
		  	ricavo=ricavo+puntata*1;
		  }
		  if(controllo[10]>=2){
		    document.getElementById("display3").style="background-color: red";
		  }
		  if(controllo[10]==5){
		  	ricavo=ricavo+puntata*200;
		  }else if(controllo[10]==4){
		  	ricavo=ricavo+puntata*40;
		  }else if(controllo[10]==3){
		  	ricavo=ricavo+puntata*4;
		  }else if(controllo[10]==2){
		  	ricavo=ricavo+puntata*0.5;
		  }
		  if(controllo[2]>=3){
		    document.getElementById("display3").style="background-color: blue";
		  }
		  if(controllo[2]==5){
		  	ricavo=ricavo+puntata*180;
		  }else if(controllo[2]==4){
		  	ricavo=ricavo+puntata*18;
		  }else if(controllo[2]==3){
		  	ricavo=ricavo+puntata*1.8;
		  }
		  
		  if(premiriga1[2]+premiriga2[2]+premiriga3[2]>=3){
		    document.getElementById("bonusghertest").innerHTML="BONUSGHER: ";
		    spg=0;
		    myInterval2 = setInterval(bonusgherspin, dl);
		  }else{
		    calcolo();
		  }
		}	  
		  
		  function calcolo(){
		  ricavo=ricavo/10;
		  ricavo=ricavo*bonusgher;
	    ricavo=Math.round(ricavo*100)/100;
	    if(ricavo>0){
	      document.getElementById("vincitarep").innerHTML="Vincita: "+ricavo+"$";
	      Saldo=Saldo+ricavo;
	    }
			
			Saldo=Math.round(Saldo * 100) / 100;
			localStorage.setItem("saldo", Saldo);
			document.getElementById("saldo").innerHTML=Saldo;
		}
		
		function bonusgherspin(){
		  if(spg<40){
		    bonusgher=Math.floor((Math.random() *36) + 15);
		    bonusgher=bonusgher/10;
		    if(premiriga1[2]+premiriga2[2]+premiriga3[2]>=4){
		      bonusgher=bonusgher*Math.pow(2.5,(premiriga1[2]+premiriga2[2]+premiriga3[2]-3));
		    }
		    document.getElementById("bonusghermolt").innerHTML=("x"+bonusgher);
		  }else if(spg==40){
		    clearInterval(myInterval2);
		    calcolo();
		  }
		  spg++;
		}
    
    localStorage.setItem("saldo", Saldo);
		document.getElementById("saldo").innerHTML=Saldo;
	</script>
</body>
</html>